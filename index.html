<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#111111" />
  <title>Rep & Reset</title>

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">R&R</div>
      <div>
        <div class="title">Rep & Reset</div>
        <div class="subtitle">Timer • Calendar • Tracker</div>
      </div>
    </div>

    <nav class="tabs">
      <button class="tab active" data-tab="today">Today</button>
      <button class="tab" data-tab="plan">Plan</button>
      <button class="tab" data-tab="calendar">Calendar</button>
      <button class="tab" data-tab="profile">Profile</button>
    </nav>
  </header>

  <main class="container">
    <!-- TODAY -->
    <section id="tab-today" class="panel show">
      <div class="card">
        <div class="row space-between">
          <div>
            <div class="label">Current</div>
            <div id="currentTitle" class="h2">—</div>
          </div>
          <div class="nextBox">
            <div class="label">Next</div>
            <div id="nextTitle" class="h3">—</div>
          </div>
        </div>

        <div class="timerBox">
          <div id="timerState" class="label">Idle</div>
          <div id="timeLeft" class="time">00:00</div>
          <div id="countHint" class="hint">Press Start to begin (5s countdown + beeps).</div>
        </div>

        <div class="controls">
          <button id="btnStart" class="btn primary">Start</button>
          <button id="btnPause" class="btn">Pause</button>
          <button id="btnBack" class="btn">Back</button>
          <button id="btnSkip" class="btn">Skip</button>
          <button id="btnFinish" class="btn danger">Finish</button>
        </div>

        <div class="divider"></div>

        <div class="row space-between">
          <div class="label">Today’s Session Order</div>
          <button id="btnReloadToday" class="btn small">Reload from Plan</button>
        </div>
        <ol id="todayList" class="list"></ol>
      </div>
    </section>

    <!-- PLAN -->
    <section id="tab-plan" class="panel">
      <div class="card">
        <div class="h2">Plan Builder</div>
        <p class="muted">Starter rule: scheduled every day except Sunday. (We can add weekly/every-other-day next.)</p>

        <div class="grid2">
          <div>
            <label class="label" for="startDate">Start date</label>
            <input id="startDate" type="date" class="input" />
          </div>
          <div>
            <label class="label">Schedule</label>
            <div class="pill">DAILY (except Sundays)</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="h3">Add Interval</div>
        <div class="grid4">
          <div>
            <label class="label" for="intervalType">Type</label>
            <select id="intervalType" class="input">
              <option value="workout">Workout</option>
              <option value="rest">Rest</option>
            </select>
          </div>
          <div class="span2">
            <label class="label" for="intervalTitle">Title</label>
            <input id="intervalTitle" class="input" placeholder="e.g., Jumping Jacks / Rest" />
          </div>
          <div>
            <label class="label" for="intervalSeconds">Seconds</label>
            <input id="intervalSeconds" class="input" type="number" min="5" value="30" />
          </div>
        </div>

        <div class="row">
          <button id="btnAddInterval" class="btn primary">Add</button>
          <button id="btnSavePlan" class="btn">Save Plan</button>
          <button id="btnExport" class="btn">Export JSON</button>
          <button id="btnImport" class="btn">Import JSON</button>
        </div>

        <textarea id="jsonBox" class="textarea" placeholder="Export appears here. For import, paste JSON here then click Import."></textarea>

        <div class="divider"></div>

        <div class="h3">Intervals (ordered)</div>
        <ol id="planList" class="list"></ol>
      </div>
    </section>

    <!-- CALENDAR -->
    <section id="tab-calendar" class="panel">
      <div class="card">
        <div class="row space-between">
          <div>
            <div class="h2">Calendar</div>
            <div class="muted">Green: completed • Orange: Sunday rest (notes allowed) • Red: missed</div>
          </div>
          <div class="row">
            <button id="calPrev" class="btn">◀</button>
            <button id="calToday" class="btn">Today</button>
            <button id="calNext" class="btn">▶</button>
          </div>
        </div>

        <div id="calHeader" class="calHeader"></div>
        <div id="calendarGrid" class="calendar"></div>

        <div class="divider"></div>

        <div class="h3">Selected Day</div>
        <div id="dayDetails" class="muted">Tap a day to view details.</div>

        <div id="restNoteBox" class="restNoteBox hidden">
          <label class="label" for="restNote">Rest day note</label>
          <textarea id="restNote" class="textarea" placeholder="Add a note for this rest day..."></textarea>
          <button id="btnSaveNote" class="btn primary">Save Note</button>
        </div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="tab-profile" class="panel">
      <div class="card">
        <div class="h2">Profile (starter)</div>
        <p class="muted">Placeholder for later: weight/height + max tracking.</p>
        <div class="grid2">
          <div>
            <label class="label">Height (optional)</label>
            <input id="height" class="input" placeholder="cm" />
          </div>
          <div>
            <label class="label">Weight (optional)</label>
            <input id="weight" class="input" placeholder="kg" />
          </div>
        </div>
        <button id="btnSaveProfile" class="btn primary">Save Profile</button>
        <div id="profileSaved" class="hint"></div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
</body>
</html>
